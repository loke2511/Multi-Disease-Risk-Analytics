{% extends "base.html" %}
{% block title %}{{ disease_info.name }} Prediction{% endblock %}

{% block extra_css %}
<style>
    .prediction-container {
        padding: 3rem 0;
        min-height: 100vh;
    }

    .prediction-header {
        background: linear-gradient(135deg, {
                {
                disease_info.color
            }
        }

        , {
            {
            disease_info.color
        }
    }

    dd);
    color: white;
    padding: 3rem 2rem;
    border-radius: var(--radius-xl);
    text-align: center;
    margin-bottom: 3rem;
    box-shadow: var(--shadow-lg);
    }

    .prediction-form-card {
        background: white;
        border-radius: var(--radius-xl);
        padding: 3rem;
        box-shadow: var(--shadow-lg);
        max-width: 800px;
        margin: 0 auto;
    }

    .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
    }

    .section-title {
        font-size: 1.1rem;
        font-weight: 700;

        color: {
                {
                disease_info.color
            }
        }

        ;
        margin: 1.5rem 0 0.5rem;
        padding-bottom: 0.5rem;

        border-bottom: 2px solid {
                {
                disease_info.color
            }
        }

        22;
        grid-column: 1 / -1;
    }

    .form-hint {
        font-size: 0.75rem;
        color: #888;
        margin-top: 0.25rem;
    }

    .info-banner {
        background: #f0f9ff;

        border-left: 4px solid {
                {
                disease_info.color
            }
        }

        ;
        padding: 1rem 1.5rem;
        border-radius: 0 8px 8px 0;
        margin-bottom: 2rem;
        font-size: 0.9rem;
        color: #334155;
    }

    .info-banner strong {
        color: {
                {
                disease_info.color
            }
        }

        ;
    }

    .loading-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 9999;
        align-items: center;
        justify-content: center;
    }

    .loading-overlay.active {
        display: flex;
    }

    .loading-content {
        text-align: center;
        color: white;
    }

    .loading-spinner {
        width: 80px;
        height: 80px;
        border: 6px solid rgba(255, 255, 255, 0.2);
        border-top-color: white;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 2rem;
    }

    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }

    .range-container {
        position: relative;
    }

    .range-container input[type="range"] {
        width: 100%;
        height: 8px;
        -webkit-appearance: none;
        background: linear-gradient(to right, #22c55e, #eab308, #ef4444);
        border-radius: 4px;
        outline: none;
    }

    .range-container input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 22px;
        height: 22px;
        background: white;

        border: 3px solid {
                {
                disease_info.color
            }
        }

        ;
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }

    .range-value {
        text-align: center;
        font-weight: 700;
        font-size: 1.1rem;

        color: {
                {
                disease_info.color
            }
        }

        ;
        margin-top: 0.25rem;
    }

    .range-labels {
        display: flex;
        justify-content: space-between;
        font-size: 0.7rem;
        color: #94a3b8;
    }

    .freq-group {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 4px;
    }

    .freq-option input {
        display: none;
    }

    .freq-option label {
        display: block;
        text-align: center;
        padding: 0.5rem 0.25rem;
        border-radius: 8px;
        font-size: 0.7rem;
        font-weight: 600;
        cursor: pointer;
        background: #f1f5f9;
        color: #64748b;
        transition: all 0.2s;
        border: 2px solid transparent;
    }

    .freq-option input:checked+label {
        background: {
                {
                disease_info.color
            }
        }

        ;
        color: white;

        border-color: {
                {
                disease_info.color
            }
        }

        ;
    }

    .freq-option label:hover {
        background: #e2e8f0;
    }

    .full-width {
        grid-column: 1 / -1;
    }
</style>
{% endblock %}

{% block content %}
<div class="prediction-container container">
    <div class="prediction-header fade-in">
        <h1 style="font-size: 2.5rem; margin-bottom: 1rem; color: white;">{{ disease_info.name }} Risk Screening</h1>
        <p style="font-size: 1.125rem; margin: 0; opacity: 0.95;">Answer simple questions about your health â€” no lab
            tests needed</p>
    </div>
    <div class="prediction-form-card slide-up">
        <div class="info-banner">
            <strong>No Hospital Visit Required!</strong> All questions below can be answered from home based on your
            symptoms, lifestyle, and how you feel. This is a pre-screening tool.
        </div>
        <form id="predictionForm">
            <div class="form-grid">

                {% if disease_type == 'diabetes' %}
                <h3 class="section-title">Personal Information</h3>
                <div class="form-group"><label class="form-label">Age</label><input type="number" class="form-control"
                        name="age" required min="1" max="120" value="30"></div>
                <div class="form-group"><label class="form-label">Gender</label><select class="form-control"
                        name="gender" required>
                        <option value="1">Male</option>
                        <option value="0">Female</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Height (cm)</label><input type="number"
                        class="form-control" name="height" required min="100" max="250" value="170"></div>
                <div class="form-group"><label class="form-label">Weight (kg)</label><input type="number"
                        class="form-control" name="weight" required min="20" max="200" value="70"></div>
                <div class="form-group"><label class="form-label">Pregnancies (females only, else 0)</label><input
                        type="number" class="form-control" name="pregnancies" min="0" max="20" value="0"></div>
                <h3 class="section-title">Symptoms You Feel</h3>
                <div class="form-group"><label class="form-label">How often do you urinate?</label><select
                        class="form-control" name="frequent_urination">
                        <option value="0">Normal (4-7 times/day)</option>
                        <option value="1">Slightly more than usual</option>
                        <option value="2">Very frequently (10+ times/day)</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Excessive Thirst</label><select class="form-control"
                        name="excessive_thirst">
                        <option value="0">Normal</option>
                        <option value="1">Sometimes feel extra thirsty</option>
                        <option value="2">Always extremely thirsty</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Unexplained Weight Change (last 3
                        months)</label><select class="form-control" name="weight_loss">
                        <option value="0">No change</option>
                        <option value="1">Lost 1-3 kg</option>
                        <option value="2">Lost more than 3 kg</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Blurred Vision</label><select class="form-control"
                        name="blurred_vision">
                        <option value="0">No</option>
                        <option value="1">Occasionally</option>
                        <option value="2">Frequently</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Do wounds/cuts heal slowly?</label><select
                        class="form-control" name="slow_healing">
                        <option value="0">No, heals normally</option>
                        <option value="1">Yes, takes longer than usual</option>
                    </select></div>
                <div class="form-group full-width"><label class="form-label">Fatigue Level (How tired do you feel
                        daily?)</label>
                    <div class="range-container"><input type="range" name="fatigue" min="0" max="10" value="3"
                            oninput="this.nextElementSibling.textContent=this.value+'/10'">
                        <div class="range-value">3/10</div>
                        <div class="range-labels"><span>No fatigue</span><span>Moderate</span><span>Extreme</span></div>
                    </div>
                </div>
                <div class="form-group"><label class="form-label">Tingling/Numbness in Hands or Feet</label><select
                        class="form-control" name="tingling">
                        <option value="0">Never</option>
                        <option value="1">Sometimes</option>
                        <option value="2">Often</option>
                    </select></div>
                <div class="form-group"><label class="form-label">How long have you had these symptoms?</label><select
                        class="form-control" name="symptom_duration">
                        <option value="0">No symptoms</option>
                        <option value="1">Less than 1 week</option>
                        <option value="2">1-4 weeks</option>
                        <option value="3">1-6 months</option>
                        <option value="4">More than 6 months</option>
                    </select></div>
                <h3 class="section-title">Lifestyle and Family</h3>
                <div class="form-group"><label class="form-label">Family History of Diabetes</label><select
                        class="form-control" name="family_history">
                        <option value="0">No one in family</option>
                        <option value="1">Grandparent(s)</option>
                        <option value="2">Parent(s) or sibling(s)</option>
                    </select></div>
                <div class="form-group full-width"><label class="form-label">How physically active are you?</label>
                    <div class="freq-group">
                        <div class="freq-option"><input type="radio" name="activity" id="act0" value="0" checked><label
                                for="act0">Never</label></div>
                        <div class="freq-option"><input type="radio" name="activity" id="act1" value="1"><label
                                for="act1">Rarely</label></div>
                        <div class="freq-option"><input type="radio" name="activity" id="act2" value="2"><label
                                for="act2">Weekly</label></div>
                        <div class="freq-option"><input type="radio" name="activity" id="act3" value="3"><label
                                for="act3">Often</label></div>
                        <div class="freq-option"><input type="radio" name="activity" id="act4" value="4"><label
                                for="act4">Daily</label></div>
                    </div>
                </div>
                <div class="form-group"><label class="form-label">Diet Type</label><select class="form-control"
                        name="diet">
                        <option value="0">Mostly junk/processed food</option>
                        <option value="1">Mixed diet</option>
                        <option value="2">Mostly home-cooked, balanced</option>
                        <option value="3">Strict healthy/low sugar</option>
                    </select></div>
                <div class="form-group full-width"><label class="form-label">Stress Level</label>
                    <div class="range-container"><input type="range" name="stress" min="0" max="10" value="4"
                            oninput="this.nextElementSibling.textContent=this.value+'/10'">
                        <div class="range-value">4/10</div>
                        <div class="range-labels"><span>Very calm</span><span>Moderate</span><span>Extreme stress</span>
                        </div>
                    </div>
                </div>

                {% elif disease_type == 'heart_disease' %}
                <h3 class="section-title">Personal Information</h3>
                <div class="form-group"><label class="form-label">Age</label><input type="number" class="form-control"
                        name="age" required min="1" max="120" value="50"></div>
                <div class="form-group"><label class="form-label">Gender</label><select class="form-control"
                        name="gender" required>
                        <option value="1">Male</option>
                        <option value="0">Female</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Height (cm)</label><input type="number"
                        class="form-control" name="height" required min="100" max="250" value="170"></div>
                <div class="form-group"><label class="form-label">Weight (kg)</label><input type="number"
                        class="form-control" name="weight" required min="20" max="200" value="75"></div>
                <h3 class="section-title">Heart-Related Symptoms</h3>
                <div class="form-group"><label class="form-label">Chest Pain / Discomfort</label><select
                        class="form-control" name="chest_pain">
                        <option value="0">Never</option>
                        <option value="1">Rare (once a month)</option>
                        <option value="2">Sometimes (weekly)</option>
                        <option value="3">Frequently (daily)</option>
                        <option value="4">Severe and persistent</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Shortness of Breath</label><select
                        class="form-control" name="shortness_breath">
                        <option value="0">Never</option>
                        <option value="1">Only during heavy exercise</option>
                        <option value="2">During normal activities</option>
                        <option value="3">Even at rest</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Pain spreading to arm/jaw/back</label><select
                        class="form-control" name="radiating_pain">
                        <option value="0">No</option>
                        <option value="1">Occasionally</option>
                        <option value="2">Frequently</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Irregular Heartbeat / Palpitations</label><select
                        class="form-control" name="palpitations">
                        <option value="0">Never</option>
                        <option value="1">Rarely</option>
                        <option value="2">Sometimes</option>
                        <option value="3">Often</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Dizziness / Lightheadedness</label><select
                        class="form-control" name="dizziness">
                        <option value="0">Never</option>
                        <option value="1">Sometimes</option>
                        <option value="2">Often</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Swelling in Legs/Ankles</label><select
                        class="form-control" name="swelling">
                        <option value="0">No</option>
                        <option value="1">Mild</option>
                        <option value="2">Noticeable</option>
                    </select></div>
                <div class="form-group full-width"><label class="form-label">Overall Fatigue Level</label>
                    <div class="range-container"><input type="range" name="fatigue" min="0" max="10" value="3"
                            oninput="this.nextElementSibling.textContent=this.value+'/10'">
                        <div class="range-value">3/10</div>
                        <div class="range-labels"><span>Energetic</span><span>Moderate</span><span>Exhausted</span>
                        </div>
                    </div>
                </div>
                <div class="form-group"><label class="form-label">How long have you had these symptoms?</label><select
                        class="form-control" name="symptom_duration">
                        <option value="0">No symptoms</option>
                        <option value="1">Less than 1 week</option>
                        <option value="2">1-4 weeks</option>
                        <option value="3">1-6 months</option>
                        <option value="4">More than 6 months</option>
                    </select></div>
                <h3 class="section-title">Health History and Lifestyle</h3>
                <div class="form-group"><label class="form-label">Smoking Status</label><select class="form-control"
                        name="smoking">
                        <option value="0">Never smoked</option>
                        <option value="1">Quit over 5 years ago</option>
                        <option value="2">Quit recently (1-5 years)</option>
                        <option value="3">Current light smoker</option>
                        <option value="4">Current heavy smoker</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Do you have High Blood Pressure?</label><select
                        class="form-control" name="high_bp">
                        <option value="0">No / Don't know</option>
                        <option value="1">Borderline</option>
                        <option value="2">Yes, diagnosed</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Do you have Diabetes?</label><select
                        class="form-control" name="diabetes">
                        <option value="0">No</option>
                        <option value="1">Pre-diabetic</option>
                        <option value="2">Yes</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Family History of Heart Disease</label><select
                        class="form-control" name="family_history">
                        <option value="0">None</option>
                        <option value="1">Distant relative</option>
                        <option value="2">Parent or sibling</option>
                    </select></div>
                <div class="form-group full-width"><label class="form-label">Stress Level</label>
                    <div class="range-container"><input type="range" name="stress" min="0" max="10" value="4"
                            oninput="this.nextElementSibling.textContent=this.value+'/10'">
                        <div class="range-value">4/10</div>
                        <div class="range-labels"><span>Very calm</span><span>Moderate</span><span>Extreme</span></div>
                    </div>
                </div>
                <div class="form-group full-width"><label class="form-label">Physical Activity</label>
                    <div class="freq-group">
                        <div class="freq-option"><input type="radio" name="activity" id="act0" value="0"><label
                                for="act0">Never</label></div>
                        <div class="freq-option"><input type="radio" name="activity" id="act1" value="1" checked><label
                                for="act1">Rarely</label></div>
                        <div class="freq-option"><input type="radio" name="activity" id="act2" value="2"><label
                                for="act2">Weekly</label></div>
                        <div class="freq-option"><input type="radio" name="activity" id="act3" value="3"><label
                                for="act3">Often</label></div>
                        <div class="freq-option"><input type="radio" name="activity" id="act4" value="4"><label
                                for="act4">Daily</label></div>
                    </div>
                </div>
                <div class="form-group"><label class="form-label">Alcohol Consumption</label><select
                        class="form-control" name="alcohol">
                        <option value="0">Never</option>
                        <option value="1">Occasionally (social)</option>
                        <option value="2">Regularly (weekly)</option>
                        <option value="3">Heavy (daily)</option>
                    </select></div>

                {% elif disease_type == 'kidney_disease' %}
                <h3 class="section-title">Personal Information</h3>
                <div class="form-group"><label class="form-label">Age</label><input type="number" class="form-control"
                        name="age" required min="1" max="120" value="45"></div>
                <div class="form-group"><label class="form-label">Gender</label><select class="form-control"
                        name="gender" required>
                        <option value="1">Male</option>
                        <option value="0">Female</option>
                    </select></div>
                <h3 class="section-title">Kidney-Related Symptoms</h3>
                <div class="form-group"><label class="form-label">Swelling (legs/feet/face/eyes)</label><select
                        class="form-control" name="swelling">
                        <option value="0">None</option>
                        <option value="1">Mild (barely noticeable)</option>
                        <option value="2">Moderate</option>
                        <option value="3">Severe</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Changes in Urination</label><select
                        class="form-control" name="urination_changes">
                        <option value="0">Normal</option>
                        <option value="1">More frequent than usual</option>
                        <option value="2">Less frequent</option>
                        <option value="3">Painful / Burning sensation</option>
                        <option value="4">Blood in urine</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Foamy / Bubbly Urine</label><select
                        class="form-control" name="foamy_urine">
                        <option value="0">No</option>
                        <option value="1">Sometimes</option>
                        <option value="2">Always</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Loss of Appetite</label><select class="form-control"
                        name="appetite_loss">
                        <option value="0">Normal appetite</option>
                        <option value="1">Slightly reduced</option>
                        <option value="2">Significantly reduced</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Nausea / Vomiting</label><select class="form-control"
                        name="nausea">
                        <option value="0">Never</option>
                        <option value="1">Occasionally</option>
                        <option value="2">Frequently</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Itchy Skin</label><select class="form-control"
                        name="itchy_skin">
                        <option value="0">No</option>
                        <option value="1">Mild</option>
                        <option value="2">Severe/persistent</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Back/Side Pain (near kidneys)</label><select
                        class="form-control" name="back_pain">
                        <option value="0">No pain</option>
                        <option value="1">Mild</option>
                        <option value="2">Moderate to severe</option>
                    </select></div>
                <div class="form-group full-width"><label class="form-label">Fatigue Level</label>
                    <div class="range-container"><input type="range" name="fatigue" min="0" max="10" value="3"
                            oninput="this.nextElementSibling.textContent=this.value+'/10'">
                        <div class="range-value">3/10</div>
                        <div class="range-labels"><span>Energetic</span><span>Moderate</span><span>Exhausted</span>
                        </div>
                    </div>
                </div>
                <div class="form-group"><label class="form-label">How long have you had symptoms?</label><select
                        class="form-control" name="symptom_duration">
                        <option value="0">No symptoms</option>
                        <option value="1">Less than 1 week</option>
                        <option value="2">1-4 weeks</option>
                        <option value="3">1-6 months</option>
                        <option value="4">More than 6 months</option>
                    </select></div>
                <h3 class="section-title">Health History</h3>
                <div class="form-group"><label class="form-label">High Blood Pressure?</label><select
                        class="form-control" name="high_bp">
                        <option value="0">No</option>
                        <option value="1">Borderline</option>
                        <option value="2">Yes, diagnosed</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Diabetes?</label><select class="form-control"
                        name="diabetes">
                        <option value="0">No</option>
                        <option value="1">Pre-diabetic</option>
                        <option value="2">Yes</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Family History of Kidney Disease</label><select
                        class="form-control" name="family_history">
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Regular Painkiller Use (Ibuprofen etc.)</label><select
                        class="form-control" name="painkillers">
                        <option value="0">Never / Rarely</option>
                        <option value="1">Sometimes (monthly)</option>
                        <option value="2">Frequently (weekly+)</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Daily Water Intake</label><select class="form-control"
                        name="water_intake">
                        <option value="0">Less than 4 glasses</option>
                        <option value="1">4-6 glasses</option>
                        <option value="2">6-8 glasses</option>
                        <option value="3">8+ glasses</option>
                    </select></div>

                {% elif disease_type == 'liver_disease' %}
                <h3 class="section-title">Personal Information</h3>
                <div class="form-group"><label class="form-label">Age</label><input type="number" class="form-control"
                        name="age" required min="1" max="120" value="40"></div>
                <div class="form-group"><label class="form-label">Gender</label><select class="form-control"
                        name="gender" required>
                        <option value="1">Male</option>
                        <option value="0">Female</option>
                    </select></div>
                <h3 class="section-title">Symptoms</h3>
                <div class="form-group"><label class="form-label">Yellowing of Skin/Eyes (Jaundice)</label><select
                        class="form-control" name="jaundice">
                        <option value="0">No</option>
                        <option value="1">Slight yellow tint</option>
                        <option value="2">Clearly visible</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Abdominal Pain/Swelling</label><select
                        class="form-control" name="abdominal_pain">
                        <option value="0">No</option>
                        <option value="1">Mild discomfort</option>
                        <option value="2">Moderate pain</option>
                        <option value="3">Severe pain</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Dark Colored Urine</label><select class="form-control"
                        name="dark_urine">
                        <option value="0">Normal color</option>
                        <option value="1">Slightly dark</option>
                        <option value="2">Very dark (cola colored)</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Pale/Light Colored Stool</label><select
                        class="form-control" name="pale_stool">
                        <option value="0">Normal</option>
                        <option value="1">Sometimes pale</option>
                        <option value="2">Frequently pale/clay colored</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Nausea / Vomiting</label><select class="form-control"
                        name="nausea">
                        <option value="0">Never</option>
                        <option value="1">Occasionally</option>
                        <option value="2">Frequently</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Loss of Appetite</label><select class="form-control"
                        name="appetite_loss">
                        <option value="0">Normal</option>
                        <option value="1">Slightly reduced</option>
                        <option value="2">Very poor appetite</option>
                    </select></div>
                <div class="form-group full-width"><label class="form-label">Fatigue Level</label>
                    <div class="range-container"><input type="range" name="fatigue" min="0" max="10" value="3"
                            oninput="this.nextElementSibling.textContent=this.value+'/10'">
                        <div class="range-value">3/10</div>
                        <div class="range-labels"><span>Energetic</span><span>Moderate</span><span>Exhausted</span>
                        </div>
                    </div>
                </div>
                <div class="form-group"><label class="form-label">Itchy Skin</label><select class="form-control"
                        name="itchy_skin">
                        <option value="0">No</option>
                        <option value="1">Mild</option>
                        <option value="2">Severe</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Symptom Duration</label><select class="form-control"
                        name="symptom_duration">
                        <option value="0">No symptoms</option>
                        <option value="1">Less than 1 week</option>
                        <option value="2">1-4 weeks</option>
                        <option value="3">1-6 months</option>
                        <option value="4">More than 6 months</option>
                    </select></div>
                <h3 class="section-title">Lifestyle</h3>
                <div class="form-group"><label class="form-label">Alcohol Consumption</label><select
                        class="form-control" name="alcohol">
                        <option value="0">Never</option>
                        <option value="1">Occasionally (social events)</option>
                        <option value="2">Regularly (2-3 times/week)</option>
                        <option value="3">Daily</option>
                        <option value="4">Heavy daily drinker</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Family History of Liver Disease</label><select
                        class="form-control" name="family_history">
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select></div>

                {% elif disease_type == 'breast_cancer' %}
                <h3 class="section-title">Personal Information</h3>
                <div class="form-group"><label class="form-label">Age</label><input type="number" class="form-control"
                        name="age" required min="18" max="120" value="45"></div>
                <div class="form-group"><label class="form-label">Gender</label><select class="form-control"
                        name="gender" required>
                        <option value="0">Female</option>
                        <option value="1">Male</option>
                    </select></div>
                <h3 class="section-title">Breast Changes</h3>
                <div class="form-group"><label class="form-label">Lump in Breast or Underarm</label><select
                        class="form-control" name="lump">
                        <option value="0">No lump felt</option>
                        <option value="1">Small, painless lump</option>
                        <option value="2">Noticeable, hard lump</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Change in Breast Size/Shape</label><select
                        class="form-control" name="size_change">
                        <option value="0">No change</option>
                        <option value="1">Slight change noticed</option>
                        <option value="2">Noticeable change</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Nipple Discharge (not milk)</label><select
                        class="form-control" name="nipple_discharge">
                        <option value="0">No</option>
                        <option value="1">Clear discharge</option>
                        <option value="2">Bloody discharge</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Skin Changes on Breast</label><select
                        class="form-control" name="skin_changes">
                        <option value="0">Normal</option>
                        <option value="1">Dimpling</option>
                        <option value="2">Redness/pitting (orange peel)</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Breast Pain</label><select class="form-control"
                        name="breast_pain">
                        <option value="0">No</option>
                        <option value="1">Mild/cyclical</option>
                        <option value="2">Persistent pain</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Nipple Turned Inward</label><select
                        class="form-control" name="nipple_inversion">
                        <option value="0">No</option>
                        <option value="1">Recently inverted</option>
                    </select></div>
                <div class="form-group"><label class="form-label">How long have you noticed changes?</label><select
                        class="form-control" name="symptom_duration">
                        <option value="0">No changes</option>
                        <option value="1">Less than 1 month</option>
                        <option value="2">1-3 months</option>
                        <option value="3">More than 3 months</option>
                    </select></div>
                <h3 class="section-title">Risk Factors</h3>
                <div class="form-group"><label class="form-label">Family History of Breast Cancer</label><select
                        class="form-control" name="family_history">
                        <option value="0">None</option>
                        <option value="1">Distant relative</option>
                        <option value="2">Mother/sister/daughter</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Age at First Period</label><select
                        class="form-control" name="early_period">
                        <option value="0">12 or older</option>
                        <option value="1">Before 12</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Hormone Replacement Therapy</label><select
                        class="form-control" name="hrt">
                        <option value="0">No / Never</option>
                        <option value="1">Currently or recently</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Alcohol</label><select class="form-control"
                        name="alcohol">
                        <option value="0">No</option>
                        <option value="1">Occasionally</option>
                        <option value="2">Regularly</option>
                    </select></div>
                <div class="form-group full-width"><label class="form-label">Physical Activity Level</label>
                    <div class="freq-group">
                        <div class="freq-option"><input type="radio" name="activity" id="act0" value="0"><label
                                for="act0">Never</label></div>
                        <div class="freq-option"><input type="radio" name="activity" id="act1" value="1" checked><label
                                for="act1">Rarely</label></div>
                        <div class="freq-option"><input type="radio" name="activity" id="act2" value="2"><label
                                for="act2">Weekly</label></div>
                        <div class="freq-option"><input type="radio" name="activity" id="act3" value="3"><label
                                for="act3">Often</label></div>
                        <div class="freq-option"><input type="radio" name="activity" id="act4" value="4"><label
                                for="act4">Daily</label></div>
                    </div>
                </div>
                <div class="form-group"><label class="form-label">Are you overweight? (BMI 30+)</label><select
                        class="form-control" name="obesity">
                        <option value="0">No</option>
                        <option value="1">Slightly overweight</option>
                        <option value="2">Yes, obese</option>
                    </select></div>

                {% elif disease_type == 'anemia' %}
                <h3 class="section-title">Personal Information</h3>
                <div class="form-group"><label class="form-label">Age</label><input type="number" class="form-control"
                        name="age" required min="1" max="120" value="30"></div>
                <div class="form-group"><label class="form-label">Gender</label><select class="form-control"
                        name="gender" required>
                        <option value="1">Male</option>
                        <option value="0">Female</option>
                    </select></div>
                <h3 class="section-title">Symptoms</h3>
                <div class="form-group full-width"><label class="form-label">Fatigue / Tiredness Level</label>
                    <div class="range-container"><input type="range" name="fatigue" min="0" max="10" value="3"
                            oninput="this.nextElementSibling.textContent=this.value+'/10'">
                        <div class="range-value">3/10</div>
                        <div class="range-labels"><span>Normal energy</span><span>Often tired</span><span>Constantly
                                exhausted</span></div>
                    </div>
                </div>
                <div class="form-group"><label class="form-label">Pale Skin / Nails / Gums</label><select
                        class="form-control" name="pale_skin">
                        <option value="0">Normal color</option>
                        <option value="1">Slightly pale</option>
                        <option value="2">Noticeably pale</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Shortness of Breath</label><select
                        class="form-control" name="shortness_breath">
                        <option value="0">Never</option>
                        <option value="1">During exercise only</option>
                        <option value="2">During normal activity</option>
                        <option value="3">Even at rest</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Dizziness / Lightheadedness</label><select
                        class="form-control" name="dizziness">
                        <option value="0">Never</option>
                        <option value="1">When standing up quickly</option>
                        <option value="2">Frequently throughout day</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Cold Hands and Feet</label><select
                        class="form-control" name="cold_extremities">
                        <option value="0">No</option>
                        <option value="1">Sometimes</option>
                        <option value="2">Always cold</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Headaches</label><select class="form-control"
                        name="headaches">
                        <option value="0">Rarely</option>
                        <option value="1">Weekly</option>
                        <option value="2">Daily</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Brittle Nails</label><select class="form-control"
                        name="brittle_nails">
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Fast/Irregular Heartbeat</label><select
                        class="form-control" name="irregular_heart">
                        <option value="0">No</option>
                        <option value="1">Occasionally</option>
                        <option value="2">Frequently</option>
                    </select></div>
                <h3 class="section-title">Risk Factors</h3>
                <div class="form-group"><label class="form-label">Diet Type</label><select class="form-control"
                        name="diet">
                        <option value="0">Pure vegetarian (no meat/eggs)</option>
                        <option value="1">Vegetarian with eggs/dairy</option>
                        <option value="2">Non-vegetarian (regular meat)</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Heavy Menstrual Periods (females)</label><select
                        class="form-control" name="heavy_periods">
                        <option value="0">Not applicable / Normal</option>
                        <option value="1">Heavier than normal</option>
                        <option value="2">Very heavy / prolonged</option>
                    </select></div>
                <div class="form-group"><label class="form-label">How long have symptoms lasted?</label><select
                        class="form-control" name="symptom_duration">
                        <option value="0">No symptoms</option>
                        <option value="1">Less than 2 weeks</option>
                        <option value="2">2 weeks - 3 months</option>
                        <option value="3">More than 3 months</option>
                    </select></div>

                {% else %}
                <h3 class="section-title">Personal Information</h3>
                <div class="form-group"><label class="form-label">Age</label><input type="number" class="form-control"
                        name="age" required min="1" max="120" value="40"></div>
                <div class="form-group"><label class="form-label">Gender</label><select class="form-control"
                        name="gender" required>
                        <option value="1">Male</option>
                        <option value="0">Female</option>
                    </select></div>
                <h3 class="section-title">Symptoms and Risk Factors</h3>
                {% for i in range(1, disease_info.features + 1) %}
                <div class="form-group"><label class="form-label">Symptom {{ i }} Severity</label>
                    <div class="range-container"><input type="range" name="symptom_{{ i }}" min="0" max="10" value="3"
                            oninput="this.nextElementSibling.textContent=this.value+'/10'">
                        <div class="range-value">3/10</div>
                        <div class="range-labels"><span>None</span><span>Moderate</span><span>Severe</span></div>
                    </div>
                </div>
                {% endfor %}
                <div class="form-group"><label class="form-label">Family History</label><select class="form-control"
                        name="family_history">
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select></div>
                <div class="form-group"><label class="form-label">Smoking</label><select class="form-control"
                        name="smoking">
                        <option value="0">Never</option>
                        <option value="1">Former</option>
                        <option value="2">Current</option>
                    </select></div>
                <div class="form-group full-width"><label class="form-label">Overall Health Feeling</label>
                    <div class="range-container"><input type="range" name="overall_health" min="0" max="10" value="5"
                            oninput="this.nextElementSibling.textContent=this.value+'/10'">
                        <div class="range-value">5/10</div>
                        <div class="range-labels"><span>Very poor</span><span>Average</span><span>Excellent</span></div>
                    </div>
                </div>
                <div class="form-group"><label class="form-label">Symptom Duration</label><select class="form-control"
                        name="symptom_duration">
                        <option value="0">No symptoms</option>
                        <option value="1">Less than 1 week</option>
                        <option value="2">1-4 weeks</option>
                        <option value="3">1-6 months</option>
                        <option value="4">More than 6 months</option>
                    </select></div>
                {% endif %}

            </div>
            <div style="margin-top: 2rem; text-align: center;">
                <button type="submit" class="btn btn-lg"
                    style="background: {{ disease_info.color }}; color: white; min-width: 300px; font-size: 1.1rem; padding: 1rem 2rem;">Analyze
                    My Risk</button>
            </div>
        </form>
    </div>
</div>

<div class="loading-overlay" id="loadingOverlay">
    <div class="loading-content">
        <div class="loading-spinner"></div>
        <h3>Analyzing Your Symptoms...</h3>
        <p>Our AI is evaluating your risk factors</p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    var form = document.getElementById('predictionForm');
    var loadingOverlay = document.getElementById('loadingOverlay');
    form.addEventListener('submit', function (e) {
        e.preventDefault();
        loadingOverlay.classList.add('active');
        var formData = new FormData(form);
        var data = {};
        formData.forEach(function (value, key) { data[key] = parseFloat(value); });
        fetch('{{ url_for("predictions.api_predict", disease_type=disease_type) }}', {
            method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data)
        }).then(function (response) { return response.json().then(function (result) { return { ok: response.ok, data: result }; }); })
            .then(function (res) {
                loadingOverlay.classList.remove('active');
                if (res.ok) { window.location.href = '{{ url_for("predictions.result", prediction_id=0) }}'.replace('0', res.data.prediction_id); }
                else { alert('Error: ' + (res.data.error || 'Prediction failed')); }
            }).catch(function (error) { loadingOverlay.classList.remove('active'); alert('Error: ' + error.message); });
    });
</script>
{% endblock %}